---
title: 웹 브라우저의 리소스 다운로드 우선순위
date: 2023-08-27
description: 웹 브라우저의 리소스 다운로드 우선순위를 알아봅시다.
thumbnail: https://drive.google.com/uc?export=view&id=1EWuSBXa6hIwcYUiWjfgTvfXM8QEOsncA
---

이 글은 [Fetch Priority](https://web.dev/fetch-priority/)를 참고하였습니다.

웹 브라우저가 웹 페이지를 구문 분석하고 이미지, 스크립트, CSS와 같은 리소스를 탐색하고 다운로드하기 시작할 때,
리소스를 최적의 순서로 다운로드하기 위해 해당 리소스에 가져오기(fetch) 우선순위를 할당합니다.
이러한 우선순위는 리소스의 종류와 문서 내 위치에 따라 다를 수 있습니다. 예를 들어,
뷰포트 내 이미지는 높은 우선순위를 갖을 수 있으며,
`<head>` 내 `<link>`를 통해 조기에 로드되는 렌더링 차단 CSS의 경우 매우 높은 우선순위를 갖을 수 있습니다.
브라우저는 이러한 우선순위를 효과적으로 할당하는 경향이 있지만, 모든 경우에 있어서 최적은 아닐 수 있습니다.

## 요약:

`Fetch Priority`가 도움을 줄 수 있는 몇 가지 주요 분야:

- LCP 이미지의 우선순위를 높이기 위해 이미지 요소에 fetchpriority="high"를 지정하여 LCP가 더 빨리 발생하도록 함.
- `<link rel="preload">`를 `async` 스크립트에 대한 현재 흔히 사용되는 해킹보다 더 나은 의미론을 사용하여 async 스크립트의 우선순위를 높임.
- 스크립트의 우선순위를 낮추어 이미지와 더 좋은 순서로 시퀀싱할 수 있도록 함.

역사적으로, 개발자들은 `preload`와 `preconnect`를 사용하여 리소스 우선순위에 어느 정도의 영향을 미쳤습니다.
`Fetch Priority`는 이러한 리소스 힌트를 보완하지만, 이것이 무엇을 개선할 수 있는지 알야합니다.
`Preload`를 사용하면 리소스가 조기에 로드해야함을 브라우저에게 알릴 수 있습니다.
이는 스타일시트에 포함된 폰트, 배경 이미지 또는 스크립트에서 로드되는 리소스와 같이 쉽게 발견되지 않는 리소스에 특히 유용합니다.
`Preconnect`는 교차 출처 서버와의 연결을 미리 활성화하여 `Time-to-first-byte`와 같은 지표를 개선하는 데 도움이 되며,
필요한 리소스의 정확한 URL을 모르더라도 해당 출처를 알고 있는 경우 유용합니다.

Fetch Priority는 특정 리소스의 상대적 우선순위를 나타내기 위해 개발자가 사용할 수 있는 마크업 기반의 신호입니다 (fetchpriority 속성을 통해 이용 가능).
또한 JavaScript와 Fetch API를 통해 이러한 힌트를 활용하고 데이터를 위한 리소스 가져오기의 우선순위를 조정할 수 있습니다 (priority 속성을 사용).
Fetch Priority는 preload를 보완할 수도 있습니다.
가령 Largest Contentful Paint 이미지는 미리 로드되어도 여전히 낮은 우선순위를 갖게 됩니다.
다른 초기 낮은 우선순위 리소스에 의해 뒤로 밀려난다면 Fetch Priority를 사용하여 이미지가 얼마나 빨리 로드될지에 영향을 줄 수 있습니다.

Fetch Priority는 Chrome 101 버전 이상에서 사용 가능합니다.

## 리소스 우선순위

리소스 다운로드 순서는 페이지의 모든 리소스에 대해 브라우저가 할당한 우선순위에 따라 달라집니다.
다양한 요소들이 우선순위 계산 로직에 영향을 미칩니다. 예를 들어,

- CSS, 폰트, 자바스크립트, 이미지 및 써드파티 리소스는 각각 다른 우선순위를 할당 받는다.
- 문서 내에서 리소스를 참조하는 위치나 순서도 리소스의 우선순위에 영향을 준다.
- `preload` 리소스 힌트는 브라우저가 리소스를 더 빠르게 발견하도록 도와주어 문서가 로드되기 전에 해당 리소스를 미리 로드하며 우선순위에 도움을 준다.
- `async` 또는 `defer` 자바스크립트 파일의 경우 우선순위 계산이 변경된다.
